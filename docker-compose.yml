version: '3'
services:
  backend:
    container_name: Wallet-nest-backend
    build: .
    ports:
      - 1078:3000
    restart: always
    depends_on:
      - redis
    environment:
      - REGISTRY_SERVICE_URL=${REGISTRY_SERVICE_URL}
      - MONGODB_URL=${MONGODB_URL}
      - SERVICE_BASE_URL=${SERVICE_BASE_URL}
      - STORAGE_BUCKET_NAME=${STORAGE_BUCKET_NAME}
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - SECRET_ACCESS_KEY=${SECRET_ACCESS_KEY}
      - STORAGE_REGION=${STORAGE_REGION}
      - WALLET_SERVICE_URL=${WALLET_SERVICE_URL}
      - SELF_ISSUED_ORGANIZATION_NAME=${SELF_ISSUED_ORGANIZATION_NAME}
      - SELF_ISSUED_SCHEMA_TAG=${SELF_ISSUED_SCHEMA_TAG}
      - SELF_ISSUED_SCHEMA_ID=${SELF_ISSUED_SCHEMA_ID}
      - SELF_ISSUED_SCHEMA_VERSION=${SELF_ISSUED_SCHEMA_VERSION}
      - REDIS_HOST=${REDIS_HOST}
      - REDIS_PORT=${REDIS_PORT}
    networks:
      - xplor-network
  redis:
    image: redis
    ports:
      - '6379:6379'
    volumes:
      - redis:/data
    networks:
      - xplor-network

volumes:
  redis:
networks:
  xplor-network:
    external: true
